(()=>{"use strict";var e,t={679:(e,t,s)=>{var a=s(848),n=s(338),i=s(540);n.createRoot(document.getElementById("chatbot-root")).render((0,a.jsx)(()=>{const[e,t]=(0,i.useState)([{id:"1",text:"Hello! I'm SmartShield Assistant. I can help you understand phishing threats and security best practices. How can I assist you today?",isUser:!1,timestamp:Date.now()}]),[s,n]=(0,i.useState)(""),[r,o]=(0,i.useState)(!1),c=(0,i.useRef)(null);(0,i.useEffect)(()=>{c.current?.scrollIntoView({behavior:"smooth"})},[e]);const l=async()=>{if(!s.trim()||r)return;const e={id:Date.now().toString(),text:s,isUser:!0,timestamp:Date.now()};t(t=>[...t,e]),n(""),o(!0);try{const e=await fetch("http://localhost:4000/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({context:"User is asking about a flagged webpage",question:s,sessionId:"extension-session"})});if(!e.ok)throw new Error(`Backend request failed: ${e.status}`);const a=await e.json(),n={id:(Date.now()+1).toString(),text:a.answer||"I apologize, but I'm having trouble connecting to the server. Please try again later.",isUser:!1,timestamp:Date.now()};t(e=>[...e,n])}catch(e){const s={id:(Date.now()+1).toString(),text:"I'm sorry, I'm currently unable to connect to the server. Please make sure the SmartShield backend is running and try again.",isUser:!1,timestamp:Date.now()};t(e=>[...e,s])}finally{o(!1)}};return(0,a.jsxs)("div",{className:"chatbot-container",children:[(0,a.jsxs)("div",{className:"chatbot-header",children:[(0,a.jsx)("h3",{children:"SmartShield Assistant"}),(0,a.jsxs)("div",{className:"status-indicator",children:[(0,a.jsx)("div",{className:"status-dot"}),"Online"]})]}),(0,a.jsxs)("div",{className:"messages-container",children:[e.map(e=>{return(0,a.jsx)("div",{className:"message "+(e.isUser?"user":"bot"),children:(0,a.jsxs)("div",{className:"message-content",children:[(0,a.jsx)("div",{className:"message-text",children:e.text}),(0,a.jsx)("div",{className:"message-time",children:(t=e.timestamp,new Date(t).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))})]})},e.id);var t}),r&&(0,a.jsx)("div",{className:"message bot",children:(0,a.jsx)("div",{className:"message-content",children:(0,a.jsxs)("div",{className:"typing-indicator",children:[(0,a.jsx)("span",{}),(0,a.jsx)("span",{}),(0,a.jsx)("span",{})]})})}),(0,a.jsx)("div",{ref:c})]}),(0,a.jsxs)("div",{className:"input-container",children:[(0,a.jsx)("textarea",{value:s,onChange:e=>n(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),l())},placeholder:"Ask me about phishing protection...",rows:2,disabled:r}),(0,a.jsx)("button",{onClick:l,disabled:!s.trim()||r,className:"send-button",children:"Send"})]})]})},{}))}},s={};function a(e){var n=s[e];if(void 0!==n)return n.exports;var i=s[e]={exports:{}};return t[e](i,i.exports,a),i.exports}a.m=t,e=[],a.O=(t,s,n,i)=>{if(!s){var r=1/0;for(d=0;d<e.length;d++){for(var[s,n,i]=e[d],o=!0,c=0;c<s.length;c++)(!1&i||r>=i)&&Object.keys(a.O).every(e=>a.O[e](s[c]))?s.splice(c--,1):(o=!1,i<r&&(r=i));if(o){e.splice(d--,1);var l=n();void 0!==l&&(t=l)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[s,n,i]},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={968:0};a.O.j=t=>0===e[t];var t=(t,s)=>{var n,i,[r,o,c]=s,l=0;if(r.some(t=>0!==e[t])){for(n in o)a.o(o,n)&&(a.m[n]=o[n]);if(c)var d=c(a)}for(t&&t(s);l<r.length;l++)i=r[l],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(d)},s=self.webpackChunksmartshield_extension=self.webpackChunksmartshield_extension||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var n=a.O(void 0,[96],()=>a(679));n=a.O(n)})();